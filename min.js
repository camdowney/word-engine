export function render(e,r){if(!e)return;const t=r.firstChild,n=t?r:build(r),i=()=>document.querySelector(`#${t?.id}`),d=i();if(d){d.dispatchEvent(new Event("unmount")),d.parentNode.replaceChild(n,d);const e=i();return e.dispatchEvent(new Event("mount")),e}{const r=e.children.length;Array.isArray(n)?n.forEach((r=>e.appendChild(r))):e.appendChild(n);const t=e.children[r];return t.dispatchEvent(new Event("mount")),t}}export function build(e){const r=e=>document.createRange().createContextualFragment(e);if(!e)return r("");if("string"==typeof e)return r(e);if(Array.isArray(e))return e.map(build);let t={},n={};keys(e).forEach((r=>r.startsWith("_")?t[r.substring(1)]=e[r]:n[r]=e[r]));const{tag:i,children:d,...a}=n,c=i||"div",s=r(`<${c} ${keys(a).map((e=>`${e.replace(/_/g,"-")}="${a[e]}"`)).join("")}></${c}>`);return keys(t).forEach((e=>s.firstChild.addEventListener(e,t[e]))),Array.isArray(d)?d?.forEach((e=>s.firstChild.appendChild(build(e)))):s.firstChild.appendChild(build(d)),s}