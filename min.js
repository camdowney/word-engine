export function useStore(e){if(e)return window.FernStore||(window.FernStore={}),window.FernStore[e]||(window.FernStore[e]={}),window.FernStore[e]}export function render(e,t){if(!e)return;const r=createElement(t),n="#"+r.firstChild?.id,a=n.length>1&&document.querySelector(n);let i=null;if(a)a.dispatchEvent(new Event("unmount")),a.parentNode.replaceChild(r,a),i=document.querySelector(n);else{const t=e.children.length;e.append(r),i=e.children[t]}return i.dispatchEvent(new Event("mount")),i}function createElement(e){if(!e)return createFragment("");if("string"==typeof e)return createFragment(e);if(Array.isArray(e))return wrapElements(e.map(createElement));let t={},r={};keys(e).forEach((n=>n.startsWith("_")?t[n.substring(1)]=e[n]:r[n]=e[n]));const{tag:n,children:a,...i}=r,c=createFragment(createHTML(n,i));return keys(t).forEach((e=>Array.isArray(t[e])?c.firstChild.addEventListener(e,(r=>t[e].forEach((e=>e(r))))):c.firstChild.addEventListener(e,t[e]))),a&&c.firstChild.append(createElement(a)),c}function wrapElements(e){const t=createFragment("");return t.append(...e),t}function createHTML(e,t){const r=e||"div";return`<${r} ${keys(t).filter((e=>void 0!==t[e])).map((e=>`${e.replace("_","-")}="${t[e]}"`)).join("")}></${r}>`}function createFragment(e){return document.createRange().createContextualFragment(e)}export function keys(e){return[...Object.keys(e||{})]}