export function render(e,t){if(!e)return;const r=createElement(t),n="#"+r.firstChild?.id,a=n.length>1&&document.querySelector(n);let c=null;if(a)a.dispatchEvent(new Event("unmount")),a.parentNode.replaceChild(r,a),c=document.querySelector(n);else{const t=e.children.length;e.append(r),c=e.children[t]}return c.dispatchEvent(new Event("mount")),c}export function createElement(e){if(!e)return createFragment("");if("string"==typeof e)return createFragment(e);if(Array.isArray(e))return wrapElements(e.map(createElement));let t={},r={};keys(e).forEach((n=>n.startsWith("_")?t[n.substring(1)]=e[n]:r[n]=e[n]));const{tag:n,children:a,...c}=r,i=createFragment(createHTML(n,c));return keys(t).forEach((e=>Array.isArray(t[e])?i.firstChild.addEventListener(e,(r=>t[e].forEach((e=>e(r))))):i.firstChild.addEventListener(e,t[e]))),a&&i.firstChild.append(createElement(a)),i}function wrapElements(e){const t=createFragment("");return t.append(...e),t}function createHTML(e,t){const r=e||"div";return`<${r} ${keys(t).filter((e=>void 0!==t[e])).map((e=>`${e.replace("_","-")}="${t[e]}"`)).join("")}></${r}>`}function createFragment(e){return document.createRange().createContextualFragment(e)}export function keys(e){return[...Object.keys(e||{})]}